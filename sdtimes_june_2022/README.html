<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>GraphQL Security</title>
<meta name="author" content="David A. Ventimiglia"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/black.css" id="theme"/>

</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-background="./slide_background.png"><h1 class="title">GraphQL Security</h1><p class="subtitle">Something Old, Something New</p>

</section>

<section>
<section id="slide-org8de5ad4" data-background="./slide_background.png">
<h2 id="org8de5ad4">Who</h2>
<div class="outline-text-2" id="text-org8de5ad4">
</div>
</section>
<section id="slide-org9cc6f68" data-background="./slide_background.png">
<h3 id="org9cc6f68">David A. Ventimiglia</h3>
<blockquote >
<p>
"I'm a physicist, data scientist, data engineer, and software
engineer, and I work for <a href="https://hasura.io/"><b>Hasura</b></a>, a software technology company that
provides developer-focused tooling products.  I am not, however, a
cybersecurity expert nor a certified financial planner.  Always
consult professionals for security and financial advice."
</p>
</blockquote>

</section>
</section>
<section>
<section id="slide-org029c062" data-background="./slide_background.png">
<h2 id="org029c062">What</h2>
<div class="outline-text-2" id="text-org029c062">
</div>
</section>
<section id="slide-org16b6030" data-background="./slide_background.png">
<h3 id="org16b6030">GraphQL API</h3>
<div class="column" style="float:left; width:50%">

<ul>
<li>Query Language</li>
<li>Schema
<ul>
<li>Types
<ul>
<li>Fields</li>

</ul></li>

</ul></li>
<li>Types relate to Types</li>
<li>Sound familiar?</li>

</ul>

</div>

<div class="column" style="float:right; width:50%;">


<div id="orgc042560" class="figure">
<p><img src="GraphQL.png" alt="GraphQL.png" height="100%" width="100%" />
</p>
</div>

</div>

</section>
<section id="slide-org4d04251" data-background="./slide_background.png">
<h3 id="org4d04251">GraphQL Security: In</h3>
<ul>
<li>Principles</li>
<li>Opinions</li>
<li>Hasura Demo</li>
<li>Summary</li>

</ul>

</section>
<section id="slide-org87072b8" data-background="./slide_background.png">
<h3 id="org87072b8">GraphQL Security: Out</h3>
<ul>
<li><del>Cybersecurity</del>
<ul>
<li>See:  Certified Experts</li>

</ul></li>
<li><del>REST Security</del>
<ul>
<li>See:  <a href="https://owasp.org/www-project-api-security/">OWASP</a></li>

</ul></li>
<li><del>Comprehensive Tooling Demo</del>
<ul>
<li>See:  References</li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org713fa7a" data-background="./slide_background.png">
<h2 id="org713fa7a">Principles</h2>
<div class="outline-text-2" id="text-org713fa7a">
</div>
</section>
<section id="slide-orgc988636" data-background="./slide_background.png">
<h3 id="orgc988636">Life is about trade-offs</h3>
<div class="column" style="float:left; width:75%">

<ul>
<li>Focus, engage, act.</li>
<li>Conduct a frank self-assessment.</li>
<li>Avoid <a href="https://en.wikipedia.org/wiki/Cargo_cult">Cargo Cults</a>.</li>

</ul>

<blockquote >
<p>
"There Is No Such Thing As Absolute Security."
</p>
</blockquote>
<blockquote >
<p>
"Security = Risk Management."
</p>
</blockquote>

</div>

<div class="column" style="float:right; width:25%;">


<div id="org42c6416" class="figure">
<p><img src="ShowCover.jpeg" alt="ShowCover.jpeg" height="100%" width="100%" />
</p>
</div>

</div>

</section>
<section id="slide-org588d02f" data-background="./slide_background.png">
<h3 id="org588d02f">Know Your Enemy</h3>
<div class="column" style="float:left; width:75%">

<ul>
<li>Disclosure (Confidentiality)</li>
<li>Destruction (Integrity)</li>
<li>Denial (Availability)</li>

</ul>

<blockquote >
<p>
"The Three Security Goals Are Confidentiality, Integrity, and
Availability."
</p>
</blockquote>

</div>

<div class="column" style="float:right; width:25%;">


<div id="orgdda4de9" class="figure">
<p><img src="ShowCover.jpeg" alt="ShowCover.jpeg" height="100%" width="100%" />
</p>
</div>

</div>

</section>
<section id="slide-org8a54773" data-background="./slide_background.png">
<h3 id="org8a54773">Bottom Up</h3>
<div class="column" style="float:left; width:75%">

<ul>
<li>Build authorization into the data model.</li>
<li>Apply redundant measures at every level (within reason).</li>
<li>Avoid identity erasure.</li>

</ul>

<blockquote >
<p>
"Defense in Depth as Strategy"
</p>
</blockquote>

</div>

<div class="column" style="float:right; width:25%;">


<div id="orgaf862e2" class="figure">
<p><img src="ShowCover.jpeg" alt="ShowCover.jpeg" height="100%" width="100%" />
</p>
</div>

</div>

</section>
<section id="slide-org1ed80c4" data-background="./slide_background.png">
<h3 id="org1ed80c4">Keep It Simple [Stupid] (KISS)</h3>
<div class="column" style="float:left; width:75%">

<ul>
<li>Adopt a small set of principles.</li>
<li>Apply them ruthlessly and redundantly.</li>
<li>Repeat, repeat, repeat.</li>

</ul>

<blockquote >
<p>
"Complexity Is the Enemy of Security."
</p>
</blockquote>

</div>

<div class="column" style="float:right; width:25%;">


<div id="org4bf966a" class="figure">
<p><img src="ShowCover.jpeg" alt="ShowCover.jpeg" height="100%" width="100%" />
</p>
</div>

</div>

</section>
<section id="slide-orgb741f03" data-background="./slide_background.png">
<h3 id="orgb741f03">Least Privilege</h3>
<div class="column" style="float:left; width:75%">

<ul>
<li>The most secure API is the one that does nothing at all.</li>
<li>Never trust anyone (within reason).</li>
<li>Opt in.  Don't Opt out.</li>

</ul>

<blockquote >
<p>
"When Left on Their Own, People Tend to Make the Worst Security
Decisions."
</p>
</blockquote>

</div>

<div class="column" style="float:right; width:25%;">


<div id="org0cadcd0" class="figure">
<p><img src="ShowCover.jpeg" alt="ShowCover.jpeg" height="100%" width="100%" />
</p>
</div>

</div>

</section>
</section>
<section>
<section id="slide-org8f4ce55" data-background="./slide_background.png">
<h2 id="org8f4ce55">GraphQL Security Orthodoxy</h2>
<div class="outline-text-2" id="text-org8f4ce55">
</div>
</section>
<section id="slide-orgb6afdb5" data-background="./slide_background.png">
<h3 id="orgb6afdb5">Disable Console Access</h3>
<ul>
<li>GraphQL servers often host an "admin console".</li>
<li>Disable it in production.</li>

</ul>

</section>
<section id="slide-org4b95997" data-background="./slide_background.png">
<h3 id="org4b95997">Disable Schema Introspection</h3>
<ul>
<li>Introspection is in the spec and in most (all?) servers.</li>
<li>Disable it in production.</li>

</ul>

</section>
<section id="slide-orgc30c0dc" data-background="./slide_background.png">
<h3 id="orgc30c0dc">Disable Query Suggestions</h3>
<ul>
<li><i>Some</i> GraphQL servers try to be overly helpful.</li>
<li>Disable it in production.</li>

</ul>

</section>
<section id="slide-org35e5c91" data-background="./slide_background.png">
<h3 id="org35e5c91">Impose Limits</h3>
<ul>
<li>Traditional rate limits are a start but are not enough.</li>
<li>Limit rate.</li>
<li>Limit time.</li>
<li>Limit depth.</li>
<li>Limit nodes.</li>
<li>Limit complexity.</li>

</ul>

</section>
<section id="slide-org12d58f5" data-background="./slide_background.png">
<h3 id="org12d58f5">Whitelist Operations</h3>
<ul>
<li>Bless a fixed set of allowed queries.</li>
<li>Be careful in general.</li>
<li>Be careful with Automatic Persisted Queries (APQ) in particular.</li>

</ul>

</section>
</section>
<section>
<section id="slide-orgf40d2fd" data-background="./slide_background.png">
<h2 id="orgf40d2fd">GraphQL Security Heterodoxy</h2>
<div class="outline-text-2" id="text-orgf40d2fd">
</div>
</section>
<section id="slide-org54f9a40" data-background="./slide_background.png">
<h3 id="org54f9a40">Don't Confuse Public vs Private.</h3>
<ul>
<li>If you don't <i>need</i> to offer a public API, then don't provide one.</li>
<li>If you're not providing a public API, then don't act like you are.</li>

</ul>

</section>
<section id="slide-org230c4c2" data-background="./slide_background.png">
<h3 id="org230c4c2">Don't Disable Console Access</h3>
<ul>
<li>If you applied the Bottom-Up and Least Privilege principles,
then the console can't do anything unauthorized anyway.</li>

</ul>

</section>
<section id="slide-org8bada65" data-background="./slide_background.png">
<h3 id="org8bada65">Don't Disable Schema Introspection and Query Suggestions</h3>
<ul>
<li>The public needs to know how to use your public API.</li>
<li>The public shouldn't have access to your private API.</li>
<li>The information will get out anyway.</li>

</ul>

</section>
<section id="slide-orgd1705a3" data-background="./slide_background.png">
<h3 id="orgd1705a3">Don't Use GraphQL Security</h3>
<ul>
<li>Or at least, don't rely on GraphQL security.</li>
<li>Work diligently from the bottom up, and you (almost) won't need
it.</li>

</ul>

</section>
<section id="slide-org629b3bc" data-background="./slide_background.png">
<h3 id="org629b3bc">Don't Use GraphQL</h3>
<ul>
<li>For private APIs, that is.</li>
<li>Use Allow Lists.</li>
<li>And if you're using Allow Lists, turn them into REST endpoints
or RPCs.</li>
<li>GraphQL is for people, not for machines.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org48b6161" data-background="./slide_background.png">
<h2 id="org48b6161">Hasura Demo</h2>

</section>
</section>
<section>
<section id="slide-org6e47276" data-background="./slide_background.png">
<h2 id="org6e47276">Summary</h2>
<ul>
<li>Cybersecurity is a vast topic.</li>
<li>Take it seriously and consult with experts.</li>
<li>Tame the vastness with a principled approach.</li>
<li>Do the easy things for GraphQL, but only because they're easy.</li>
<li>Focus, engage, and manage trade-offs.</li>

</ul>

</section>
</section>
<section>
<section id="slide-orga04f18b" data-background="./slide_background.png">
<h2 id="orga04f18b">References</h2>
<ul>
<li><a href="https://www.pearson.com/us/higher-education/program/Merkow-Information-Security-Principles-and-Practices-2nd-Edition/PGM91863.html">Information Security: Principles and Practices, 2nd Edition</a>
by Mark S. Merkow and Jim Breithaupt</li>
<li><a href="https://spec.graphql.org/June2018/">GraphQL Specification</a></li>

</ul>

</section>
</section>
<section>
<section id="slide-org2ba94dc" data-background="./slide_background.png">
<h2 id="org2ba94dc">References</h2>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><a href="https://www.sofa-api.com/">Sofa</a></td>
<td class="org-left">REST endpoints</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.graphql-mesh.com/">Mesh</a></td>
<td class="org-left">Whitelisting</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.graphql-shield.com/">Shield</a></td>
<td class="org-left">Authorization</td>
</tr>

<tr>
<td class="org-left"><a href="https://github.com/pa-bru/graphql-cost-analysis">graphql-cost-analysis</a></td>
<td class="org-left">Limit complexity</td>
</tr>

<tr>
<td class="org-left">Hasura</td>
<td class="org-left">Everything (except query complexity)</td>
</tr>
</tbody>
</table>

</section>
</section>
<section>
<section id="slide-org7a87d75" data-background="./slide_background.png">
<h2 id="org7a87d75"><i>Thank you!</i></h2>

<div id="org99221d6" class="figure">
<p><img src="sdtimes.png" alt="sdtimes.png" />
</p>
</div>
</section>
</section>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/markdown/markdown.js"></script>
<script src="./reveal.js/plugin/zoom/zoom.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealMarkdown, RevealZoom, RevealNotes],
transition:'none', controlsLayout:'edges', progress:false, controlsTutorial:false
});

</script>
</body>
</html>
